#!/bin/bash
# to test this run the docker command at the end of this file and then run:
#curl "http://localhost:9000/2015-03-31/functions/function/invocations" -d '{"Records": [{"EventSource": "aws:sns","EventVersion": "1.0","EventSubscriptionArn": "arn:aws:sns:us-east-1:832706493240:cmr-subscriptions-sit:1f071817-9e7b-450e-b5a5-606bef7c5b71","Sns": {"Type": "Notification","MessageId": "ed8c7ee0-c70a-5050-8ef9-1effe57d3dde","TopicArn": "arn:aws:sns:us-east-1:832706493240:cmr-subscriptions-sit","Subject": "testing again","Message": "testing again","Timestamp": "2025-02-06T20:48:55.564Z","SignatureVersion": "1","Signature": "iNvFhB7SvB2Um4xkJ4czhaDtQ9WMr3VWz91j9aBJclHQOSR1vznwdT6pJLJOj1fUA/C9JatNEnouUiPut+8DACZ8pVXfMw5bvHoyci63Y7z5gcmVIHpEMetn1Ms7SpgnuddrIoKpCN/tAQGrEfmzDlMbTXjRWrXpEs8xXsJ+Xq2Mp17FoMU00/JV/eAP8ktHX7TtS+dBGLsPd/QPY3eN5QYcmYAcoFd99Va4Qt6dMqOoH/fjIs1aCwnmD02MSnbjCWOgNSteZChnVAT/+l26krKoidHSop53guPt5KWNBGXTSy4Ouhq630qourN+AiVbKqzUtVypNTXas7iBEoT5Nw==","SigningCertUrl": "https://sns.us-east-1.amazonaws.com/SimpleNotificationService-9c6465fa7f48f5cacd23014631ec1136.pem","UnsubscribeUrl": "https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:us-east-1:832706493240:cmr-subscriptions-sit:1f071817-9e7b-450e-b5a5-606bef7c5b71","MessageAttributes": {"endpoint":"http://localhost:5001/store"}}}]}'

docker run --platform linux/amd64 -p 9000:8080 notification-lambda:latest


